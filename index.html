<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Giám sát phân loại sản phẩm</title>
<script src="https://js.pusher.com/8.2/pusher.min.js"></script>
<style>
body{font-family:Arial;text-align:center;background:#fff}
header{border-bottom:2px solid #1E88E5;margin-bottom:10px}
h1{color:#1E88E5}
.container{display:flex;justify-content:center;margin-top:20px}
.left,.right{border:1px solid #ddd;padding:15px;margin:5px}
.left h3{margin:5px 0;color:#1E88E5}
table{border-collapse:collapse;width:100%}
td,th{border:1px solid #ddd;padding:8px;text-align:left}
</style>
</head>
<body>
<header>
  <h1>TRƯỜNG ĐH KỸ THUẬT - CÔNG NGHỆ CẦN THƠ</h1>
  <h2>ĐỒ ÁN PHÂN LOẠI SẢN PHẨM</h2>
</header>
<div class="container">
  <div class="left">
    <h3>Giáo viên hướng dẫn</h3>
    <p>TS. Đỗ Vinh Quang<br>ThS. Trần Ngọc Liên</p>
    <h3>Sinh viên thực hiện</h3>
    <p>Trần Hoài Phúc - 2100497<br>Trịnh Hoàng An - 2101066</p>
    <h3>Khoa/Ngành</h3>
    <p>Kỹ Thuật Cơ Khí<br>CNKT Cơ Điện Tử</p>
  </div>
  <div class="right">
    <table>
      <tr><th>Khối lượng</th><td><span id="weight">0.000 g</span></td></tr>
      <tr><th>Phân loại</th><td><span id="cls">---</span></td></tr>
      <tr><th>Sản phẩm nhẹ</th><td><span id="light">0</span></td></tr>
      <tr><th>Sản phẩm trung bình</th><td><span id="medium">0</span></td></tr>
      <tr><th>Sản phẩm nặng</th><td><span id="heavy">0</span></td></tr>
      <tr><th>Tổng khối lượng</th><td><span id="total">0.000 g</span></td></tr>
    </table>
  </div>
</div>

<script>
  // === Cấu hình Pusher ===
  Pusher.logToConsole = false;
  var pusher = new Pusher('7cf4401ef3e17125dda2', {
    cluster: 'ap1'
  });

  // === Nhận dữ liệu realtime từ Python ===
  var channel = pusher.subscribe('scale-channel');
  channel.bind('new-result', function(data) {
    document.getElementById('weight').textContent = data.weight.toFixed(3) + " g";
    document.getElementById('cls').textContent = data.cls;
    document.getElementById('light').textContent = data.light;
    document.getElementById('medium').textContent = data.medium;
    document.getElementById('heavy').textContent = data.heavy;
    document.getElementById('total').textContent = data.total.toFixed(3) + " g";
  });
</script>
</body>
</html>
